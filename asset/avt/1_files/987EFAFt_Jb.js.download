;/*FB_PKG_DELIM*/

__d("Hpke",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=new Uint8Array([0]);a=new TextEncoder();var h=a.encode("psk_id_hash"),i=a.encode("info_hash"),j=a.encode("secret"),k=a.encode("key"),l=a.encode("base_nonce"),m=a.encode("exp"),n=a.encode("HPKE"),o=a.encode("sec");c=b("$InternalEnum")({KemX25519HkdfSha256Id:32});d=b("$InternalEnum")({KdfHkdfSha256Id:1});e=b("$InternalEnum")({AeadAes128GcmId:1,AeadChaCha20Poly1305Id:3});a=function(){function a(a,b,c){this.kem=a,this.kdf=b,this.aead=c}var b=a.prototype;b.setupBaseS=async function(a,b){a=await this.kem.encap(a);b=await this.keySchedule(a.sharedSecret,b);return{enc:a.enc,ctx:b}};b.setupBaseR=async function(a,b,c){a=await this.kem.decap(a,b);b=await this.keySchedule(a,c);return b};b.keySchedule=async function(a,b){var c=s(this.kem.kem_id,this.kdf.kdf_id,this.aead.aead_id),d=await this.kdf.labeledExtract(new Uint8Array(0),h,new Uint8Array(0),c);b=await this.kdf.labeledExtract(new Uint8Array(0),i,b,c);d=q(g,d,b);b=await this.kdf.labeledExtract(a,j,new Uint8Array(0),c);a=await this.kdf.labeledExpand(b,k,d,this.aead.nK,c);var e=await this.kdf.labeledExpand(b,l,d,this.aead.nN,c);b=await this.kdf.labeledExpand(b,m,d,this.kdf.nH,c);return new p(a,e,p.defaultSeq(this.aead.nN),b,this.aead,this.kdf,c)};b.sealSingleShot=async function(a,b,c,d){a=await this.setupBaseS(a,b);b=await a.ctx.seal(c,d);return{ct:b,enc:a.enc}};b.openSingleShot=async function(a,b,c,d,e){a=await this.setupBaseR(a,b,c);b=a.open(d,e);return b};return a}();var p=function(){function a(a,b,c,d,e,f,g){this.key=a,this.base_nonce=b,this.seq=c,this.exporter_secret=d,this.aead=e,this.kdf=f,this.suite_id=g}a.defaultSeq=function(a){return new Uint8Array(a).fill(0)};var b=a.prototype;b.seal=async function(a,b){a=await this.aead.seal(this.key,this.computeNonce(),a,b);this.incrementSeq();return a};b.open=async function(a,b){a=await this.aead.open(this.key,this.computeNonce(),a,b);this.incrementSeq();return a};b.computeNonce=function(){return t(this.base_nonce,this.seq)};b.incrementSeq=function(){var a=!1;for(var b=this.seq.byteLength-1;b>=0&&!a;b--)this.seq[b]!==255?(this.seq[b]+=1,a=!0):this.seq[b]=0};b.setSeq=function(a){this.seq=a};b.export=async function(a,b){a=await this.kdf.labeledExpand(this.exporter_secret,o,a,b,this.suite_id);return a};return a}();function q(){var a=0;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){return a+=b.byteLength});var e=new Uint8Array(a),f=0;c.forEach(function(a){e.set(a,f),f+=a.byteLength});return e}function r(a,b){var c=new Uint8Array(b);a=a;for(var d=0;d<b&&a;d++)c[b-(d+1)]=a%256,a>>=8;return c}function s(a,b,c){a=q(n,r(a,2),r(b,2),r(c,2));return a}function t(a,b){if(a.byteLength!==b.byteLength){var c=new Error("Xor: different length inputs");c.stack;throw c}c=new Uint8Array(a.byteLength);for(var d=0;d<a.byteLength;d++)c[d]=a[d]^b[d];return c}f.KemID=c;f.KdfID=d;f.AeadID=e;f.Hpke=a;f.HpkeCtx=p;f.concat=q;f.i2osp=r;f.hpkeSuiteId=s;f.xor=t}),66);
__d("AeadAes128Gcm",["Hpke"],(function(a,b,c,d,e,f,g){"use strict";var h=window.crypto||window.msCrypto;a=function(){function a(a){a===void 0&&(a=h.subtle),this.aead_id=d("Hpke").AeadID.AeadAes128GcmId,this.nK=16,this.nN=12,this.nT=16,this.internalCryptoProvider=null,this.internalCryptoProvider=a}var b=a.prototype;b.seal=async function(a,b,c,d){a=await this.internalCryptoProvider.importKey("raw",a,{name:"AES-GCM"},!0,["encrypt"]);b={name:"AES-GCM",iv:b,additionalData:c};c=await this.internalCryptoProvider.encrypt(b,a,d);return new Uint8Array(c)};b.open=async function(a,b,c,d){a=await this.internalCryptoProvider.importKey("raw",a,{name:"AES-GCM"},!0,["decrypt"]);b={name:"AES-GCM",iv:b,additionalData:c};c=await this.internalCryptoProvider.decrypt(b,a,d);return new Uint8Array(c)};return a}();g.AeadAes128Gcm=a}),98);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-int-1.0.1",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0});function a(a,b){var c=a>>>16&65535;a=a&65535;var d=b>>>16&65535;b=b&65535;return a*b+(c*b+a*d<<16>>>0)|0}g.mul=Math.imul||a;function b(a,b){return a+b|0}g.add=b;function c(a,b){return a-b|0}g.sub=c;function d(a,b){return a<<b|a>>>32-b}g.rotl=d;function e(a,b){return a<<32-b|a>>>b}g.rotr=e;function f(a){return typeof a==="number"&&isFinite(a)&&Math.floor(a)===a}g.isInteger=Number.isInteger||f;g.MAX_SAFE_INTEGER=9007199254740991;g.isSafeInteger=function(a){return g.isInteger(a)&&a>=-g.MAX_SAFE_INTEGER&&a<=g.MAX_SAFE_INTEGER}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-binary-1.0.1",["stablelib-int-1.0.1"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("stablelib-int-1.0.1")),h={},i={exports:h};function j(){Object.defineProperty(h,"__esModule",{value:!0});var a=g();function b(a,b){b===void 0&&(b=0);return(a[b+0]<<8|a[b+1])<<16>>16}h.readInt16BE=b;function c(a,b){b===void 0&&(b=0);return(a[b+0]<<8|a[b+1])>>>0}h.readUint16BE=c;function d(a,b){b===void 0&&(b=0);return(a[b+1]<<8|a[b])<<16>>16}h.readInt16LE=d;function e(a,b){b===void 0&&(b=0);return(a[b+1]<<8|a[b])>>>0}h.readUint16LE=e;function f(a,b,c){b===void 0&&(b=new Uint8Array(2));c===void 0&&(c=0);b[c+0]=a>>>8;b[c+1]=a>>>0;return b}h.writeUint16BE=f;h.writeInt16BE=f;function i(a,b,c){b===void 0&&(b=new Uint8Array(2));c===void 0&&(c=0);b[c+0]=a>>>0;b[c+1]=a>>>8;return b}h.writeUint16LE=i;h.writeInt16LE=i;function j(a,b){b===void 0&&(b=0);return a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3]}h.readInt32BE=j;function k(a,b){b===void 0&&(b=0);return(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}h.readUint32BE=k;function l(a,b){b===void 0&&(b=0);return a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b]}h.readInt32LE=l;function m(a,b){b===void 0&&(b=0);return(a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b])>>>0}h.readUint32LE=m;function n(a,b,c){b===void 0&&(b=new Uint8Array(4));c===void 0&&(c=0);b[c+0]=a>>>24;b[c+1]=a>>>16;b[c+2]=a>>>8;b[c+3]=a>>>0;return b}h.writeUint32BE=n;h.writeInt32BE=n;function o(a,b,c){b===void 0&&(b=new Uint8Array(4));c===void 0&&(c=0);b[c+0]=a>>>0;b[c+1]=a>>>8;b[c+2]=a>>>16;b[c+3]=a>>>24;return b}h.writeUint32LE=o;h.writeInt32LE=o;function p(a,b){b===void 0&&(b=0);var c=j(a,b);a=j(a,b+4);return c*4294967296+a-(a>>31)*4294967296}h.readInt64BE=p;function q(a,b){b===void 0&&(b=0);var c=k(a,b);a=k(a,b+4);return c*4294967296+a}h.readUint64BE=q;function r(a,b){b===void 0&&(b=0);var c=l(a,b);a=l(a,b+4);return a*4294967296+c-(c>>31)*4294967296}h.readInt64LE=r;function s(a,b){b===void 0&&(b=0);var c=m(a,b);a=m(a,b+4);return a*4294967296+c}h.readUint64LE=s;function t(a,b,c){b===void 0&&(b=new Uint8Array(8));c===void 0&&(c=0);n(a/4294967296>>>0,b,c);n(a>>>0,b,c+4);return b}h.writeUint64BE=t;h.writeInt64BE=t;function u(a,b,c){b===void 0&&(b=new Uint8Array(8));c===void 0&&(c=0);o(a>>>0,b,c);o(a/4294967296>>>0,b,c+4);return b}h.writeUint64LE=u;h.writeInt64LE=u;function v(a,b,c){c===void 0&&(c=0);if(a%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(a/8>b.length-c)throw new Error("readUintBE: array is too short for the given bitLength");var d=0,e=1;for(a=a/8+c-1;a>=c;a--)d+=b[a]*e,e*=256;return d}h.readUintBE=v;function w(a,b,c){c===void 0&&(c=0);if(a%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(a/8>b.length-c)throw new Error("readUintLE: array is too short for the given bitLength");var d=0,e=1;for(var f=c;f<c+a/8;f++)d+=b[f]*e,e*=256;return d}h.readUintLE=w;function x(b,c,d,e){d===void 0&&(d=new Uint8Array(b/8));e===void 0&&(e=0);if(b%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!a.isSafeInteger(c))throw new Error("writeUintBE value must be an integer");var f=1;for(b=b/8+e-1;b>=e;b--)d[b]=c/f&255,f*=256;return d}h.writeUintBE=x;function y(b,c,d,e){d===void 0&&(d=new Uint8Array(b/8));e===void 0&&(e=0);if(b%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!a.isSafeInteger(c))throw new Error("writeUintLE value must be an integer");var f=1;for(var g=e;g<e+b/8;g++)d[g]=c/f&255,f*=256;return d}h.writeUintLE=y;function z(a,b){b===void 0&&(b=0);a=new DataView(a.buffer,a.byteOffset,a.byteLength);return a.getFloat32(b)}h.readFloat32BE=z;function A(a,b){b===void 0&&(b=0);a=new DataView(a.buffer,a.byteOffset,a.byteLength);return a.getFloat32(b,!0)}h.readFloat32LE=A;function B(a,b){b===void 0&&(b=0);a=new DataView(a.buffer,a.byteOffset,a.byteLength);return a.getFloat64(b)}h.readFloat64BE=B;function C(a,b){b===void 0&&(b=0);a=new DataView(a.buffer,a.byteOffset,a.byteLength);return a.getFloat64(b,!0)}h.readFloat64LE=C;function D(a,b,c){b===void 0&&(b=new Uint8Array(4));c===void 0&&(c=0);var d=new DataView(b.buffer,b.byteOffset,b.byteLength);d.setFloat32(c,a);return b}h.writeFloat32BE=D;function E(a,b,c){b===void 0&&(b=new Uint8Array(4));c===void 0&&(c=0);var d=new DataView(b.buffer,b.byteOffset,b.byteLength);d.setFloat32(c,a,!0);return b}h.writeFloat32LE=E;function F(a,b,c){b===void 0&&(b=new Uint8Array(8));c===void 0&&(c=0);var d=new DataView(b.buffer,b.byteOffset,b.byteLength);d.setFloat64(c,a);return b}h.writeFloat64BE=F;function G(a,b,c){b===void 0&&(b=new Uint8Array(8));c===void 0&&(c=0);var d=new DataView(b.buffer,b.byteOffset,b.byteLength);d.setFloat64(c,a,!0);return b}h.writeFloat64LE=G}var k=!1;function l(){k||(k=!0,j());return i.exports}function c(a){switch(a){case void 0:return l()}}e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-wipe-1.0.1",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0});function a(a){for(var b=0;b<a.length;b++)a[b]=0;return a}g.wipe=a}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-chacha-1.0.1",["stablelib-binary-1.0.1","stablelib-wipe-1.0.1"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("stablelib-binary-1.0.1")),h=a(b("stablelib-wipe-1.0.1")),i={},j={exports:i};function k(){Object.defineProperty(i,"__esModule",{value:!0});var a=g(),b=h(),c=20;function d(b,d,e){var f=1634760805,g=857760878,h=2036477234,i=1797285236,j=e[3]<<24|e[2]<<16|e[1]<<8|e[0],k=e[7]<<24|e[6]<<16|e[5]<<8|e[4],l=e[11]<<24|e[10]<<16|e[9]<<8|e[8],m=e[15]<<24|e[14]<<16|e[13]<<8|e[12],n=e[19]<<24|e[18]<<16|e[17]<<8|e[16],o=e[23]<<24|e[22]<<16|e[21]<<8|e[20],p=e[27]<<24|e[26]<<16|e[25]<<8|e[24];e=e[31]<<24|e[30]<<16|e[29]<<8|e[28];var q=d[3]<<24|d[2]<<16|d[1]<<8|d[0],r=d[7]<<24|d[6]<<16|d[5]<<8|d[4],s=d[11]<<24|d[10]<<16|d[9]<<8|d[8];d=d[15]<<24|d[14]<<16|d[13]<<8|d[12];var t=f,u=g,v=h,w=i,x=j,y=k,z=l,A=m,B=n,C=o,D=p,E=e,F=q,G=r,H=s,I=d;for(var J=0;J<c;J+=2)t=t+x|0,F^=t,F=F>>>32-16|F<<16,B=B+F|0,x^=B,x=x>>>32-12|x<<12,u=u+y|0,G^=u,G=G>>>32-16|G<<16,C=C+G|0,y^=C,y=y>>>32-12|y<<12,v=v+z|0,H^=v,H=H>>>32-16|H<<16,D=D+H|0,z^=D,z=z>>>32-12|z<<12,w=w+A|0,I^=w,I=I>>>32-16|I<<16,E=E+I|0,A^=E,A=A>>>32-12|A<<12,v=v+z|0,H^=v,H=H>>>32-8|H<<8,D=D+H|0,z^=D,z=z>>>32-7|z<<7,w=w+A|0,I^=w,I=I>>>32-8|I<<8,E=E+I|0,A^=E,A=A>>>32-7|A<<7,u=u+y|0,G^=u,G=G>>>32-8|G<<8,C=C+G|0,y^=C,y=y>>>32-7|y<<7,t=t+x|0,F^=t,F=F>>>32-8|F<<8,B=B+F|0,x^=B,x=x>>>32-7|x<<7,t=t+y|0,I^=t,I=I>>>32-16|I<<16,D=D+I|0,y^=D,y=y>>>32-12|y<<12,u=u+z|0,F^=u,F=F>>>32-16|F<<16,E=E+F|0,z^=E,z=z>>>32-12|z<<12,v=v+A|0,G^=v,G=G>>>32-16|G<<16,B=B+G|0,A^=B,A=A>>>32-12|A<<12,w=w+x|0,H^=w,H=H>>>32-16|H<<16,C=C+H|0,x^=C,x=x>>>32-12|x<<12,v=v+A|0,G^=v,G=G>>>32-8|G<<8,B=B+G|0,A^=B,A=A>>>32-7|A<<7,w=w+x|0,H^=w,H=H>>>32-8|H<<8,C=C+H|0,x^=C,x=x>>>32-7|x<<7,u=u+z|0,F^=u,F=F>>>32-8|F<<8,E=E+F|0,z^=E,z=z>>>32-7|z<<7,t=t+y|0,I^=t,I=I>>>32-8|I<<8,D=D+I|0,y^=D,y=y>>>32-7|y<<7;a.writeUint32LE(t+f|0,b,0);a.writeUint32LE(u+g|0,b,4);a.writeUint32LE(v+h|0,b,8);a.writeUint32LE(w+i|0,b,12);a.writeUint32LE(x+j|0,b,16);a.writeUint32LE(y+k|0,b,20);a.writeUint32LE(z+l|0,b,24);a.writeUint32LE(A+m|0,b,28);a.writeUint32LE(B+n|0,b,32);a.writeUint32LE(C+o|0,b,36);a.writeUint32LE(D+p|0,b,40);a.writeUint32LE(E+e|0,b,44);a.writeUint32LE(F+q|0,b,48);a.writeUint32LE(G+r|0,b,52);a.writeUint32LE(H+s|0,b,56);a.writeUint32LE(I+d|0,b,60)}function e(a,c,e,f,g){g===void 0&&(g=0);if(a.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(f.length<e.length)throw new Error("ChaCha: destination is shorter than source");var h,i;if(g===0){if(c.length!==8&&c.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");h=new Uint8Array(16);i=h.length-c.length;h.set(c,i)}else{if(c.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");h=c;i=g}c=new Uint8Array(64);for(var k=0;k<e.length;k+=64){d(c,h,a);for(var l=k;l<k+64&&l<e.length;l++)f[l]=e[l]^c[l-k];j(h,0,i)}b.wipe(c);g===0&&b.wipe(h);return f}i.streamXOR=e;function f(a,c,d,f){f===void 0&&(f=0);b.wipe(d);return e(a,c,d,d,f)}i.stream=f;function j(a,b,c){var d=1;while(c--)d=d+(a[b]&255)|0,a[b]=d&255,d>>>=8,b++;if(d>0)throw new Error("ChaCha: counter overflow")}}var l=!1;function m(){l||(l=!0,k());return j.exports}function c(a){switch(a){case void 0:return m()}}e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-constant-time-1.0.1",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0});function a(a,b,c){return~(a-1)&b|a-1&c}g.select=a;function b(a,b){return(a|0)-(b|0)-1>>>31&1}g.lessOrEqual=b;function c(a,b){if(a.length!==b.length)return 0;var c=0;for(var d=0;d<a.length;d++)c|=a[d]^b[d];return 1&c-1>>>8}g.compare=c;function d(a,b){return a.length===0||b.length===0?!1:c(a,b)!==0}g.equal=d}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-poly1305-1.0.1",["stablelib-constant-time-1.0.1","stablelib-wipe-1.0.1"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("stablelib-constant-time-1.0.1")),h=a(b("stablelib-wipe-1.0.1")),i={},j={exports:i};function k(){Object.defineProperty(i,"__esModule",{value:!0});var a=g(),b=h();i.DIGEST_LENGTH=16;var c=function(){function a(a){this.digestLength=i.DIGEST_LENGTH;this._buffer=new Uint8Array(16);this._r=new Uint16Array(10);this._h=new Uint16Array(10);this._pad=new Uint16Array(8);this._leftover=0;this._fin=0;this._finished=!1;var b=a[0]|a[1]<<8;this._r[0]=b&8191;var c=a[2]|a[3]<<8;this._r[1]=(b>>>13|c<<3)&8191;b=a[4]|a[5]<<8;this._r[2]=(c>>>10|b<<6)&7939;c=a[6]|a[7]<<8;this._r[3]=(b>>>7|c<<9)&8191;b=a[8]|a[9]<<8;this._r[4]=(c>>>4|b<<12)&255;this._r[5]=b>>>1&8190;c=a[10]|a[11]<<8;this._r[6]=(b>>>14|c<<2)&8191;b=a[12]|a[13]<<8;this._r[7]=(c>>>11|b<<5)&8065;c=a[14]|a[15]<<8;this._r[8]=(b>>>8|c<<8)&8191;this._r[9]=c>>>5&127;this._pad[0]=a[16]|a[17]<<8;this._pad[1]=a[18]|a[19]<<8;this._pad[2]=a[20]|a[21]<<8;this._pad[3]=a[22]|a[23]<<8;this._pad[4]=a[24]|a[25]<<8;this._pad[5]=a[26]|a[27]<<8;this._pad[6]=a[28]|a[29]<<8;this._pad[7]=a[30]|a[31]<<8}a.prototype._blocks=function(a,b,c){var d=this._fin?0:1<<11,e=this._h[0],f=this._h[1],g=this._h[2],h=this._h[3],i=this._h[4],j=this._h[5],k=this._h[6],l=this._h[7],m=this._h[8],n=this._h[9],o=this._r[0],p=this._r[1],q=this._r[2],r=this._r[3],s=this._r[4],t=this._r[5],u=this._r[6],v=this._r[7],w=this._r[8],x=this._r[9];while(c>=16){var y=a[b+0]|a[b+1]<<8;e+=y&8191;var z=a[b+2]|a[b+3]<<8;f+=(y>>>13|z<<3)&8191;y=a[b+4]|a[b+5]<<8;g+=(z>>>10|y<<6)&8191;z=a[b+6]|a[b+7]<<8;h+=(y>>>7|z<<9)&8191;y=a[b+8]|a[b+9]<<8;i+=(z>>>4|y<<12)&8191;j+=y>>>1&8191;z=a[b+10]|a[b+11]<<8;k+=(y>>>14|z<<2)&8191;y=a[b+12]|a[b+13]<<8;l+=(z>>>11|y<<5)&8191;z=a[b+14]|a[b+15]<<8;m+=(y>>>8|z<<8)&8191;n+=z>>>5|d;y=0;z=y;z+=e*o;z+=f*(5*x);z+=g*(5*w);z+=h*(5*v);z+=i*(5*u);y=z>>>13;z&=8191;z+=j*(5*t);z+=k*(5*s);z+=l*(5*r);z+=m*(5*q);z+=n*(5*p);y+=z>>>13;z&=8191;var A=y;A+=e*p;A+=f*o;A+=g*(5*x);A+=h*(5*w);A+=i*(5*v);y=A>>>13;A&=8191;A+=j*(5*u);A+=k*(5*t);A+=l*(5*s);A+=m*(5*r);A+=n*(5*q);y+=A>>>13;A&=8191;var B=y;B+=e*q;B+=f*p;B+=g*o;B+=h*(5*x);B+=i*(5*w);y=B>>>13;B&=8191;B+=j*(5*v);B+=k*(5*u);B+=l*(5*t);B+=m*(5*s);B+=n*(5*r);y+=B>>>13;B&=8191;var C=y;C+=e*r;C+=f*q;C+=g*p;C+=h*o;C+=i*(5*x);y=C>>>13;C&=8191;C+=j*(5*w);C+=k*(5*v);C+=l*(5*u);C+=m*(5*t);C+=n*(5*s);y+=C>>>13;C&=8191;var D=y;D+=e*s;D+=f*r;D+=g*q;D+=h*p;D+=i*o;y=D>>>13;D&=8191;D+=j*(5*x);D+=k*(5*w);D+=l*(5*v);D+=m*(5*u);D+=n*(5*t);y+=D>>>13;D&=8191;var E=y;E+=e*t;E+=f*s;E+=g*r;E+=h*q;E+=i*p;y=E>>>13;E&=8191;E+=j*o;E+=k*(5*x);E+=l*(5*w);E+=m*(5*v);E+=n*(5*u);y+=E>>>13;E&=8191;var F=y;F+=e*u;F+=f*t;F+=g*s;F+=h*r;F+=i*q;y=F>>>13;F&=8191;F+=j*p;F+=k*o;F+=l*(5*x);F+=m*(5*w);F+=n*(5*v);y+=F>>>13;F&=8191;var G=y;G+=e*v;G+=f*u;G+=g*t;G+=h*s;G+=i*r;y=G>>>13;G&=8191;G+=j*q;G+=k*p;G+=l*o;G+=m*(5*x);G+=n*(5*w);y+=G>>>13;G&=8191;var H=y;H+=e*w;H+=f*v;H+=g*u;H+=h*t;H+=i*s;y=H>>>13;H&=8191;H+=j*r;H+=k*q;H+=l*p;H+=m*o;H+=n*(5*x);y+=H>>>13;H&=8191;var I=y;I+=e*x;I+=f*w;I+=g*v;I+=h*u;I+=i*t;y=I>>>13;I&=8191;I+=j*s;I+=k*r;I+=l*q;I+=m*p;I+=n*o;y+=I>>>13;I&=8191;y=(y<<2)+y|0;y=y+z|0;z=y&8191;y=y>>>13;A+=y;e=z;f=A;g=B;h=C;i=D;j=E;k=F;l=G;m=H;n=I;b+=16;c-=16}this._h[0]=e;this._h[1]=f;this._h[2]=g;this._h[3]=h;this._h[4]=i;this._h[5]=j;this._h[6]=k;this._h[7]=l;this._h[8]=m;this._h[9]=n};a.prototype.finish=function(a,b){b===void 0&&(b=0);var c=new Uint16Array(10),d,e;if(this._leftover){e=this._leftover;this._buffer[e++]=1;for(;e<16;e++)this._buffer[e]=0;this._fin=1;this._blocks(this._buffer,0,16)}d=this._h[1]>>>13;this._h[1]&=8191;for(e=2;e<10;e++)this._h[e]+=d,d=this._h[e]>>>13,this._h[e]&=8191;this._h[0]+=d*5;d=this._h[0]>>>13;this._h[0]&=8191;this._h[1]+=d;d=this._h[1]>>>13;this._h[1]&=8191;this._h[2]+=d;c[0]=this._h[0]+5;d=c[0]>>>13;c[0]&=8191;for(e=1;e<10;e++)c[e]=this._h[e]+d,d=c[e]>>>13,c[e]&=8191;c[9]-=1<<13;d=(d^1)-1;for(e=0;e<10;e++)c[e]&=d;d=~d;for(e=0;e<10;e++)this._h[e]=this._h[e]&d|c[e];this._h[0]=(this._h[0]|this._h[1]<<13)&65535;this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535;this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535;this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535;this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535;this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535;this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535;this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535;c=this._h[0]+this._pad[0];this._h[0]=c&65535;for(e=1;e<8;e++)c=(this._h[e]+this._pad[e]|0)+(c>>>16)|0,this._h[e]=c&65535;a[b+0]=this._h[0]>>>0;a[b+1]=this._h[0]>>>8;a[b+2]=this._h[1]>>>0;a[b+3]=this._h[1]>>>8;a[b+4]=this._h[2]>>>0;a[b+5]=this._h[2]>>>8;a[b+6]=this._h[3]>>>0;a[b+7]=this._h[3]>>>8;a[b+8]=this._h[4]>>>0;a[b+9]=this._h[4]>>>8;a[b+10]=this._h[5]>>>0;a[b+11]=this._h[5]>>>8;a[b+12]=this._h[6]>>>0;a[b+13]=this._h[6]>>>8;a[b+14]=this._h[7]>>>0;a[b+15]=this._h[7]>>>8;this._finished=!0;return this};a.prototype.update=function(a){var b=0,c=a.length,d;if(this._leftover){d=16-this._leftover;d>c&&(d=c);for(var e=0;e<d;e++)this._buffer[this._leftover+e]=a[b+e];c-=d;b+=d;this._leftover+=d;if(this._leftover<16)return this;this._blocks(this._buffer,0,16);this._leftover=0}c>=16&&(d=c-c%16,this._blocks(a,b,d),b+=d,c-=d);if(c){for(var e=0;e<c;e++)this._buffer[this._leftover+e]=a[b+e];this._leftover+=c}return this};a.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);this.finish(a);return a};a.prototype.clean=function(){b.wipe(this._buffer);b.wipe(this._r);b.wipe(this._h);b.wipe(this._pad);this._leftover=0;this._fin=0;this._finished=!0;return this};return a}();i.Poly1305=c;function d(a,b){a=new c(a);a.update(b);b=a.digest();a.clean();return b}i.oneTimeAuth=d;function e(b,c){return b.length!==i.DIGEST_LENGTH||c.length!==i.DIGEST_LENGTH?!1:a.equal(b,c)}i.equal=e}var l=!1;function m(){l||(l=!0,k());return j.exports}function c(a){switch(a){case void 0:return m()}}e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-chacha20poly1305-1.0.1",["stablelib-chacha-1.0.1","stablelib-poly1305-1.0.1","stablelib-wipe-1.0.1","stablelib-binary-1.0.1","stablelib-constant-time-1.0.1"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("stablelib-chacha-1.0.1")),h=a(b("stablelib-poly1305-1.0.1")),i=a(b("stablelib-wipe-1.0.1")),j=a(b("stablelib-binary-1.0.1")),k=a(b("stablelib-constant-time-1.0.1")),l={},m={exports:l};function n(){Object.defineProperty(l,"__esModule",{value:!0});var a=g(),b=h(),c=i(),d=j(),e=k();l.KEY_LENGTH=32;l.NONCE_LENGTH=12;l.TAG_LENGTH=16;var f=new Uint8Array(16),m=function(){function g(a){this.nonceLength=l.NONCE_LENGTH;this.tagLength=l.TAG_LENGTH;if(a.length!==l.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(a)}g.prototype.seal=function(b,d,e,f){if(b.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var g=new Uint8Array(16);g.set(b,g.length-b.length);b=new Uint8Array(32);a.stream(this._key,g,b,4);var h=d.length+this.tagLength;if(f){if(f.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");f=f}else f=new Uint8Array(h);a.streamXOR(this._key,g,d,f,4);this._authenticate(f.subarray(f.length-this.tagLength,f.length),b,f.subarray(0,f.length-this.tagLength),e);c.wipe(g);return f};g.prototype.open=function(b,d,f,g){if(b.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var h=new Uint8Array(16);h.set(b,h.length-b.length);b=new Uint8Array(32);a.stream(this._key,h,b,4);var i=new Uint8Array(this.tagLength);this._authenticate(i,b,d.subarray(0,d.length-this.tagLength),f);if(!e.equal(i,d.subarray(d.length-this.tagLength,d.length)))return null;b=d.length-this.tagLength;if(g){if(g.length!==b)throw new Error("ChaCha20Poly1305: incorrect destination length");f=g}else f=new Uint8Array(b);a.streamXOR(this._key,h,d.subarray(0,d.length-this.tagLength),f,4);c.wipe(h);return f};g.prototype.clean=function(){c.wipe(this._key);return this};g.prototype._authenticate=function(a,e,g,h){e=new b.Poly1305(e);h&&(e.update(h),h.length%16>0&&e.update(f.subarray(h.length%16)));e.update(g);g.length%16>0&&e.update(f.subarray(g.length%16));var i=new Uint8Array(8);h&&d.writeUint64LE(h.length,i);e.update(i);d.writeUint64LE(g.length,i);e.update(i);h=e.digest();for(g=0;g<h.length;g++)a[g]=h[g];e.clean();c.wipe(h);c.wipe(i)};return g}();l.ChaCha20Poly1305=m}var o=!1;function p(){o||(o=!0,n());return m.exports}function c(a){switch(a){case void 0:return p()}}e.exports=c}),null);
__d("AeadChaPoly",["Hpke","stablelib-chacha20poly1305-1.0.1"],(function(a,b,c,d,e,f,g){"use strict";var h=c("stablelib-chacha20poly1305-1.0.1")();a=function(){function a(){this.aead_id=d("Hpke").AeadID.AeadChaCha20Poly1305Id,this.nK=32,this.nN=12,this.nT=16}var b=a.prototype;b.seal=function(a,b,c,d){a=new h.ChaCha20Poly1305(a);a=a.seal(b,d,c);return a};b.open=function(a,b,c,d){a=new h.ChaCha20Poly1305(a);a=a.open(b,d,c);return a};return a}();g.AeadChaPoly=a}),98);
__d("HexlifyUtils",["err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.toString(16).padStart(2,"0")}function a(a){var b="";for(var c=0;c<a.length;++c)b+=h(a[c]);return b}function b(a){if(a.length%2!==0)throw c("err")("Invalid hex string "+a);var b=new Uint8Array(a.length/2);for(var d=0;d<a.length;d+=2)b[d/2]=parseInt(a.slice(d,d+2),16);return b}g.hexlify=a;g.unhexlify=b}),98);
__d("QuicIntCodec",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=63,i=255,j=64,k=128,l=192,m=64,n=16384,o=1073741824,p=2147483647;function q(a){if(a<m)return 1;if(a<n)return 2;if(a<o)return 4;if(a>p)throw c("FBLogger")("quic_codec").mustfixThrow("Number too large to encode");return 8}function r(a,b){var d=a[b],e=d>>6;e=1<<e;d&=h;if(e===8&&(d>0||a[b+1]>0||a[b+2]>0||a[b+3]>0))throw c("FBLogger")("quic_codec").mustfixThrow("Number is too large to decode");for(var f=1;f<e;f++)d=d<<8|a[b+f];return[d,b+e]}function s(a,b,c){a=a;var d=q(a);for(var e=d-1;e>0;e--)b[c+e]=a&i,a>>=8;e=d===8?l:d===4?k:d===2?j:0;b[c]=e|a&h;return c+d}function a(a){a=r(a,0);var b=a[0];a[1];return b}function b(a){var b=q(a);b=new Uint8Array(b);s(a,b,0);return b}g.getByteLength=q;g.decodeQuicIntWithExistingBuffer=r;g.encodeWithExistingBuffer=s;g.decode=a;g.encode=b}),98);
__d("HttpRequestBinaryEncode",["QuicIntCodec"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=new URL(a.url);return{host:a.host,path:a.pathname+a.search,scheme:a.protocol.replace(":","")}}function i(a,b){var c,e=0,f=[],g=b.encode(a.method),i=g.byteLength;e+=(c=d("QuicIntCodec")).getByteLength(i)+i;f.push(g);i=h(a);g=i.host;a=i.path;i=i.scheme;i=b.encode(i);var j=i.byteLength;e+=c.getByteLength(j)+j;f.push(i);j=b.encode(g);i=j.byteLength;e+=c.getByteLength(i)+i;f.push(j);g=b.encode(a);i=g.byteLength;e+=c.getByteLength(i)+i;f.push(g);return{length:e,steps:f}}function j(a,b,c){var e=0,f=[],g=new Map(a.headers);c&&!g.has("Host")&&g.set("Host",new URL(a.url).host);for(c of g){a=c[0];g=c[1];a=b.encode(a);var h=a.byteLength;e+=d("QuicIntCodec").getByteLength(h)+h;f.push(a);h=b.encode(g);a=h.byteLength;e+=d("QuicIntCodec").getByteLength(h.byteLength)+a;f.push(h)}return{length:e,steps:[e].concat(f)}}async function k(a,b){var c=new TextEncoder(),e=0,f=[];f.push(0);e++;var g=i(a,c),h=g.length;g=g.steps;e+=h;f.push.apply(f,g);h=j(a,c,b);g=h.length;c=h.steps;e+=d("QuicIntCodec").getByteLength(g)+g;f.push.apply(f,c);b=new Uint8Array(await a.arrayBuffer());h=b.byteLength;e+=d("QuicIntCodec").getByteLength(h)+h;f.push(b);f.push(0);e++;return{length:e,steps:f}}async function a(a,b){b===void 0&&(b=!1);a=await k(a,b);b=a.length;a=a.steps;b=new Uint8Array(b);var c=0;for(a of a)typeof a==="number"?c=d("QuicIntCodec").encodeWithExistingBuffer(a,b,c):(c=d("QuicIntCodec").encodeWithExistingBuffer(a.length,b,c),b.set(a,c),c+=a.length);return b}g.binaryEncodeRequest=a}),98);
__d("HttpResponseBinaryDecode",["FBLogger","QuicIntCodec"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){e=e;var f=new Headers(),g=d("QuicIntCodec").decodeQuicIntWithExistingBuffer(a,e),h=g[0];g=g[1];h=g+h;e=g;while(e<h){g=d("QuicIntCodec").decodeQuicIntWithExistingBuffer(a,e);var i=g[0];g=g[1];var j=b.decode(a.slice(g,g+i));e=g+i;g=d("QuicIntCodec").decodeQuicIntWithExistingBuffer(a,e);i=g[0];g=g[1];var k=b.decode(a.slice(g,g+i));e=g+i;f.append(j,k)}if(h!==e)throw c("FBLogger")("http_binary").mustfixThrow("Decode response with header length mismatch");return{headers:f,offset:e}}function a(a){var b=a[0];if(b!==1)throw c("FBLogger")("http_binary").mustfixThrow("Framing indicator must be 1, but got %s instead",b);b=1;var e=new TextDecoder(),f=d("QuicIntCodec").decodeQuicIntWithExistingBuffer(a,b),g=f[0];f=f[1];b=f;f=b>=a.byteLength?{offset:b,headers:new Headers()}:h(a,e,b);b=f.offset;e=b>=a.byteLength?[0,b]:d("QuicIntCodec").decodeQuicIntWithExistingBuffer(a,b);var i=e[0];e=e[1];b=e;e=i<1?void 0:a.slice(b,b+i);return new Response(e,{headers:f.headers,status:g})}g.binaryDecodeResponse=a}),98);
__d("HttpXHRRequestBinaryEncode",["QuicIntCodec","fbjs/lib/invariant"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=new URL(a.getURI().toString());return{host:a.host,path:a.pathname+a.search,scheme:a.protocol.replace(":","")}}function i(a,b){var c,e=0,f=[],g=b.encode(a.getMethod()),i=g.byteLength;e+=(c=d("QuicIntCodec")).getByteLength(i)+i;f.push(g);i=h(a);g=i.host;a=i.path;i=i.scheme;i=b.encode(i);var j=i.byteLength;e+=c.getByteLength(j)+j;f.push(i);j=b.encode(g);i=j.byteLength;e+=c.getByteLength(i)+i;f.push(j);g=b.encode(a);i=g.byteLength;e+=c.getByteLength(i)+i;f.push(g);return{length:e,steps:f}}function j(a,b,e){var f=0,g=[],h=a.getAllRequestHeaders();h!=null||c("fbjs/lib/invariant")(0,87335);h=new Map(Object.entries(h));e&&!h.has("Host")&&h.set("Host",new URL(a.getURI().toString()).host);for(e of h){a=e[0];h=e[1];a=b.encode(a);var i=a.byteLength;f+=d("QuicIntCodec").getByteLength(i)+i;g.push(a);i=b.encode(h);a=i.byteLength;f+=d("QuicIntCodec").getByteLength(i.byteLength)+a;g.push(i)}return{length:f,steps:[f].concat(g)}}function k(a,b){var e=new TextEncoder(),f=0,g=[];g.push(0);f++;var h=i(a,e),k=h.length;h=h.steps;f+=k;g.push.apply(g,h);k=j(a,e,b);h=k.length;b=k.steps;f+=d("QuicIntCodec").getByteLength(h)+h;g.push.apply(g,b);k=a.getData();k!=null||c("fbjs/lib/invariant")(0,21489);h=e.encode(k);b=h.byteLength;f+=d("QuicIntCodec").getByteLength(b)+b;g.push(h);g.push(0);f++;return{length:f,steps:g}}function a(a,b){b===void 0&&(b=!1);a=k(a,b);b=a.length;a=a.steps;b=new Uint8Array(b);var c=0;for(a of a)typeof a==="number"?c=d("QuicIntCodec").encodeWithExistingBuffer(a,b,c):(c=d("QuicIntCodec").encodeWithExistingBuffer(a.length,b,c),b.set(a,c),c+=a.length);return b}g.binaryEncodeRelayAPIRequest=a}),98);
__d("KdfHkdfSha256",["Hpke"],(function(a,b,c,d,e,f,g){"use strict";var h=window.crypto||window.msCrypto;a=new TextEncoder();var i=a.encode("HPKE-v1");b=function(){function a(a){a===void 0&&(a=h.subtle),this.kdf_id=d("Hpke").KdfID.KdfHkdfSha256Id,this.nH=32,this.internalCryptoProvider=null,this.internalCryptoProvider=a}var b=a.prototype;b.hmac=async function(a,b){a=await this.internalCryptoProvider.importKey("raw",a.byteLength===0?new Uint8Array(32):a,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);a=await this.internalCryptoProvider.sign("HMAC",a,b);return new Uint8Array(a)};b.extract=async function(a,b){a=await this.hmac(a,b);return a};b.expand=async function(a,b,c){var d=new Uint8Array(c),e=new Uint8Array(0);b=new Uint8Array(b);var f=new Uint8Array(1);if(c>255*32){c=new Error("KDF expand: entropy limit reached");c.stack;throw c}c=new Uint8Array(32+b.length+1);for(var g=1,h=0;h<d.length;g++)f[0]=g,c.set(e,0),c.set(b,e.length),c.set(f,e.length+b.length),e=await this.hmac(a,c.slice(0,e.length+b.length+1)),d.length-h>=e.length?(d.set(e,h),h+=e.length):(d.set(e.slice(0,d.length-h),h),h+=d.length-h);return d};b.labeledExtract=async function(a,b,c,e){e=d("Hpke").concat(i,e,b,c);b=await this.extract(a,e);return b};b.labeledExpand=async function(a,b,c,e,f){f=d("Hpke").concat(new Uint8Array([0,e]),i,f,b,c);return await this.expand(a,f,e)};return a}();g.KdfHkdfSha256=b}),98);
__d("x25519FromNacl",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){var b,c=new Float64Array(16);if(a)for(b=0;b<a.length;b++)c[b]=a[b];return c},h=new Uint8Array(32);h[0]=9;g();g([1]);var i=g([56129,1]);g([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]);a=g([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]);g([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]);g([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);g([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function j(a){var b,c;for(c=0;c<16;c++)a[c]+=65536,b=Math.floor(a[c]/65536),a[(c+1)*(c<15?1:0)]+=b-1+37*(b-1)*(c===15?1:0),a[c]-=b*65536}function k(a,b,c){var d;c=~(c-1);for(var e=0;e<16;e++)d=c&(a[e]^b[e]),a[e]^=d,b[e]^=d}function l(a,b){var c,d,e=g(),f=g();for(c=0;c<16;c++)f[c]=b[c];j(f);j(f);j(f);for(b=0;b<2;b++){e[0]=f[0]-65517;for(c=1;c<15;c++)e[c]=f[c]-65535-(e[c-1]>>16&1),e[c-1]&=65535;e[15]=f[15]-32767-(e[14]>>16&1);d=e[15]>>16&1;e[14]&=65535;k(f,e,1-d)}for(c=0;c<16;c++)a[2*c]=f[c]&255,a[2*c+1]=f[c]>>8}function m(a,b){var c;for(c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}function n(a,b,c){var d;for(d=0;d<16;d++)a[d]=b[d]+c[d]|0}function o(a,b,c){var d;for(d=0;d<16;d++)a[d]=b[d]-c[d]|0}function p(a,b,c){var d,e,f=new Float64Array(31);for(d=0;d<31;d++)f[d]=0;for(d=0;d<16;d++)for(e=0;e<16;e++)f[d+e]+=b[d]*c[e];for(d=0;d<15;d++)f[d]+=38*f[d+16];for(d=0;d<16;d++)a[d]=f[d];j(a);j(a)}function q(a,b){p(a,b,b)}function r(a,b){var c=g(),d;for(d=0;d<16;d++)c[d]=b[d];for(d=253;d>=0;d--)q(c,c),d!==2&&d!==4&&p(c,c,b);for(d=0;d<16;d++)a[d]=c[d]}function s(a,b,c){var d=new Uint8Array(32),e=new Float64Array(80),f,h=g(),j=g(),s=g(),t=g(),u=g(),v=g();for(f=0;f<31;f++)d[f]=b[f];d[31]=b[31]&127|64;d[0]&=248;m(e,c);for(f=0;f<16;f++)j[f]=e[f],t[f]=h[f]=s[f]=0;h[0]=t[0]=1;for(f=254;f>=0;--f)b=d[f>>>3]>>>(f&7)&1,k(h,j,b),k(s,t,b),n(u,h,s),o(h,h,s),n(s,j,t),o(j,j,t),q(t,u),q(v,h),p(h,s,h),p(s,j,u),n(u,h,s),o(h,h,s),q(j,h),o(s,t,v),p(h,s,i),n(h,h,t),p(s,s,h),p(h,t,v),p(t,j,e),q(j,u),k(h,j,b),k(s,t,b);for(f=0;f<16;f++)e[f+16]=h[f],e[f+32]=s[f],e[f+48]=j[f],e[f+64]=t[f];c=e.subarray(32);b=e.subarray(16);r(c,c);p(b,b,c);l(a,b);return 0}function t(a,b){return s(a,b,h)}function u(a,b,c){c(b,32);return t(a,b)}var v=32,w=32,x=32,y=32;function z(){for(var a=0;a<arguments.length;a++)if(!(arguments[a]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function A(a){for(var b=0;b<a.length;b++)a[b]=0}b=function(){function a(){this.randombytesFn=function(){throw new Error("no CSPRNG")};var a=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(a&&a.getRandomValues){var b=65536;this.randombytesFn=function(c,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=b)a.getRandomValues(f.subarray(e,e+Math.min(d-e,b)));for(e=0;e<d;e++)c[e]=f[e];A(f)}}else a&&a.randomBytes&&(this.randombytesFn=function(b,c){var d,e=a.randomBytes(c);for(d=0;d<c;d++)b[d]=e[d];A(e)})}var b=a.prototype;b.scalarMult=function(a,b){z(a,b);if(a.length!==w)throw new Error("bad n size");if(b.length!==v)throw new Error("bad p size");var c=new Uint8Array(v);s(c,a,b);return c};b.scalarMultBase=function(a){z(a);if(a.length!==w)throw new Error("bad n size");var b=new Uint8Array(v);t(b,a);return b};b.boxKeyPair=function(){var a=new Uint8Array(x),b=new Uint8Array(y);u(a,b,this.randombytesFn);return{publicKey:a,secretKey:b}};b.boxKeyPairFromSecretKey=function(a){z(a);if(a.length!==y)throw new Error("bad secret key size");var b=new Uint8Array(x);t(b,a);return{publicKey:b,secretKey:new Uint8Array(a)}};b.setPRNG=function(a){this.randombytesFn=a};return a}();f["default"]=b}),66);
__d("KemX25519HkdfSha256",["Hpke","KdfHkdfSha256","x25519FromNacl"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("x25519FromNacl"))();a=new TextEncoder();var i=a.encode("eae_prk"),j=a.encode("shared_secret"),k=a.encode("KEM");b=function(){function a(a){a===void 0&&(a=new(d("KdfHkdfSha256").KdfHkdfSha256)()),this.kem_id=d("Hpke").KemID.KemX25519HkdfSha256Id,this.nSecret=32,this.nEnc=32,this.kdf=a}var b=a.prototype;b.createKeyPair=async function(){var a=await h.boxKeyPair();return{pk:a.publicKey,sk:a.secretKey}};b.pk=async function(a){a=await h.boxKeyPairFromSecretKey(a);return a.publicKey};b.encap=async function(a){var b=await this.createKeyPair(),c=h.scalarMult(b.sk,a);a=d("Hpke").concat(b.pk,a);var e=d("Hpke").concat(k,d("Hpke").i2osp(this.kem_id,2));c=await this.kdf.labeledExtract(new Uint8Array(0),i,c,e);c=await this.kdf.labeledExpand(c,j,a,this.nSecret,e);return{sharedSecret:c,enc:b.pk}};b.decap=async function(a,b){var c=h.scalarMult(b,a);b=h.scalarMultBase(b);a=d("Hpke").concat(a,b);b=d("Hpke").concat(k,d("Hpke").i2osp(this.kem_id,2));c=await this.kdf.labeledExtract(new Uint8Array(0),i,c,b);c=await this.kdf.labeledExpand(c,j,a,this.nSecret,b);return c};return a}();g.KemX25519HkdfSha256=b}),98);
__d("OhaiCommonUtils",[],(function(a,b,c,d,e,f){"use strict";e="message/bhttp request";var g="message/bhttp response";function a(a){var b=window.crypto||window.msCrypto;a=new Uint8Array(a);b.getRandomValues(a);return a}function b(a,b){var c=new Uint8Array(b);a=a;for(b=b-1;b>=0;b--)c[b]=a&255,a>>=8;return c}function c(a,b){var c=0;for(var d=0;d<b;d++)c<<=8,c|=a[d];return c}function d(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.reduce(function(a,b){return a+b.length},0),e=new Uint8Array(d),f=0;for(var g of b)e.set(g,f),f+=g.length;return e}var h=new TextEncoder().encode("");f.REQUEST_LABEL=e;f.RESPONSE_LABEL=g;f.randomBytes=a;f.encodeNumber=b;f.decodeNumber=c;f.concat=d;f.EMPTY_AAD=h}),66);
__d("getHpkeFromConfigIds",["AeadAes128Gcm","AeadChaPoly","Hpke","KdfHkdfSha256","KemX25519HkdfSha256"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case d("Hpke").KemID.KemX25519HkdfSha256Id:return new(d("KemX25519HkdfSha256").KemX25519HkdfSha256)()}}function i(a){switch(a){case d("Hpke").KdfID.KdfHkdfSha256Id:return new(d("KdfHkdfSha256").KdfHkdfSha256)()}}function j(a){switch(a){case d("Hpke").AeadID.AeadAes128GcmId:return new(d("AeadAes128Gcm").AeadAes128Gcm)();case d("Hpke").AeadID.AeadChaCha20Poly1305Id:return new(d("AeadChaPoly").AeadChaPoly)()}}function a(a){var b=a.kemId,c=a.kdfId;a=a.aeadId;return new(d("Hpke").Hpke)(h(b),i(c),j(a))}g["default"]=a}),98);
__d("OhaiClient",["HttpRequestBinaryEncode","HttpResponseBinaryDecode","HttpXHRRequestBinaryEncode","OhaiCommonUtils","getHpkeFromConfigIds"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b,e){e===void 0&&(e=!1);var f=a.keyId,g=a.kemId,h=a.kdfId,i=a.aeadId;a=a.publicKey;var j=c("getHpkeFromConfigIds")({kemId:g,kdfId:h,aeadId:i}),k=new TextEncoder();b=await d("HttpRequestBinaryEncode").binaryEncodeRequest(b,e);e=d("OhaiCommonUtils").concat(d("OhaiCommonUtils").encodeNumber(f,1),d("OhaiCommonUtils").encodeNumber(g,2),d("OhaiCommonUtils").encodeNumber(h,2),d("OhaiCommonUtils").encodeNumber(i,2));f=k.encode(d("OhaiCommonUtils").REQUEST_LABEL);g=await j.setupBaseS(a,f);h=g.enc;i=g.ctx;k=await i.seal(e,b);j=d("OhaiCommonUtils").concat(e,h,k);return{ctx:i,enc:h,encapsulatedRequest:j}}async function b(a,b,e){e===void 0&&(e=!1);var f=a.keyId,g=a.kemId,h=a.kdfId,i=a.aeadId;a=a.publicKey;var j=c("getHpkeFromConfigIds")({kemId:g,kdfId:h,aeadId:i}),k=new TextEncoder();b=await d("HttpXHRRequestBinaryEncode").binaryEncodeRelayAPIRequest(b,e);e=d("OhaiCommonUtils").concat(d("OhaiCommonUtils").encodeNumber(f,1),d("OhaiCommonUtils").encodeNumber(g,2),d("OhaiCommonUtils").encodeNumber(h,2),d("OhaiCommonUtils").encodeNumber(i,2));f=k.encode(d("OhaiCommonUtils").REQUEST_LABEL);g=await j.setupBaseS(a,f);h=g.enc;i=g.ctx;k=await i.seal(e,b);j=d("OhaiCommonUtils").concat(e,h,k);return{ctx:i,enc:h,encapsulatedRequest:j}}async function e(a,b,c){var e=a.aead,f=a.kdf,g=e.nN,h=e.nK,i=Math.max(g,h),j=c.slice(0,i);c=c.slice(i);i=new TextEncoder();a=await a.export(i.encode(d("OhaiCommonUtils").RESPONSE_LABEL),h);b=d("OhaiCommonUtils").concat(b,j);j=await f.extract(b,a);b=await f.expand(j,i.encode("key"),h);a=await f.expand(j,i.encode("nonce"),g);h=await e.open(b,a,d("OhaiCommonUtils").EMPTY_AAD,c);f=await d("HttpResponseBinaryDecode").binaryDecodeResponse(h);return f}g.encapsulateRequest=a;g.encapsulateRelayAPIRequest=b;g.decapsulateResponse=e}),98);
__d("OhaiWebConfig",[],(function(a,b,c,d,e,f){a=Object.freeze({ALLOWED_PROXY_URLS:["https://meta.privacy-gateway.cloudflare.com/relay","https://meta-ohttp-relay-prod.fastly-edge.com/"],DEFAULT_PROXY_URL:"https://meta.privacy-gateway.cloudflare.com/relay"});f["default"]=a}),66);
__d("XLightspeedDeidentifiedRequestControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/messaging/lightspeed/unauthenticated_request/",Object.freeze({include_dependencies:!1}),void 0);b=a;g["default"]=b}),98);
__d("publishLSPlatformDeidentifiedPayload",["FBLogger","HexlifyUtils","Hpke","I64","LSDatabaseSingleton","LSDynamicDependencies","LSIntEnum","LSPlatformRealtimeTransport","OhaiClient","OhaiWebConfig","QPLUserFlow","ReQL","XLightspeedDeidentifiedRequestControllerRouteBuilder","getMWLSRegion","gkx","qpl","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("getMWLSRegion")(),l="Ls-Task-Type";function m(a,b){c("QPLUserFlow").addPoint(c("qpl")._(520829869,"994"),a,{instanceKey:b})}function n(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(520829869,"994"),a,{instanceKey:b})}async function o(a){var b=await (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton;b=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.ohai_gateway_key_configs).filter(function(a){return(i||(i=d("I64"))).gt(a.expirationDate,i.of_int32(Math.floor(Date.now()/1e3)))}));if(b==null){m("ohai_config_null",a);throw c("FBLogger")("maw_ohai").mustfixThrow("Ohai config is null")}var e=(i||(i=d("I64"))).to_int32(b.keyId),f=d("Hpke").AeadID.cast(i.to_int32(b.aeadId)),g=d("Hpke").KemID.cast(i.to_int32(b.kemId)),j=d("Hpke").KdfID.cast(i.to_int32(b.kdfId));if(f==null||j==null||g==null){m("ohai_config_missing_partial_keys",a);throw c("FBLogger")("maw_ohai").mustfixThrow("Invalid Ohai config values")}return{aeadId:f,expirationDate:i.to_int32(b.expirationDate),kdfId:j,kemId:g,keyId:e,publicKey:d("HexlifyUtils").unhexlify(b.publicKey)}}function p(a,b){a=new URL("https://www.facebook.com"+a);var c=a.search.slice(1),d=new TextEncoder().encode(c).length,e=a.pathname[a.pathname.length-1]==="/"?a.pathname.slice(0,a.pathname.length-1):a.pathname;d={"Content-Length":d.toString(),"Content-Type":"application/x-www-form-urlencoded","X-MSGR-Region":k};return new Request(a.origin+e,{body:c,headers:b!=null?babelHelpers.extends({},d,(a={},a[l]=b,a)):d,method:"POST"})}function q(a,b){return new Promise(async function(e,f){await Promise.race([window.fetch(a,b).then(function(a){return e(a)}).catch(function(a){return f(a)}),new Promise(function(){c("setTimeout")(function(){f({RE_EXN_ID:d("LSPlatformRealtimeTransport").Timeout})},3e4)})])})}async function r(a,b,e){var f=c("gkx")("7816")?"https://graph.facebook.com/ohttp":c("gkx")("7695")&&c("OhaiWebConfig").ALLOWED_PROXY_URLS.length>1?c("OhaiWebConfig").ALLOWED_PROXY_URLS[1]:c("OhaiWebConfig").DEFAULT_PROXY_URL,g=await o(e);n({int:{KeyId:g.keyId},string:{LsTaskType:b,ProxyUrl:f}},e);a=p(a,b);m("ohai_encapsulating_request",e);b=await d("OhaiClient").encapsulateRequest(g,a,!0);g=b.ctx;a=b.enc;b=b.encapsulatedRequest;m("ohai_sending_request",e);f=await q(f,{body:b,headers:{"Content-Length":b.byteLength.toString(),"Content-Type":"message/ohttp-req"},method:"POST"});m("ohai_decapsulating_response",e);b=await f.arrayBuffer();e=new Uint8Array(b);f=await d("OhaiClient").decapsulateResponse(g,a,e);b=await f.json();return b}async function a(a){var b=a.payload,e=a.requestId,f=a.taskLabel;a=a.type_;c("QPLUserFlow").start(c("qpl")._(520829869,"994"),{instanceKey:e});try{b=c("XLightspeedDeidentifiedRequestControllerRouteBuilder").buildURL({include_dependencies:!0,request_id:e,request_payload:b,request_type:(i||(i=d("I64"))).to_int32(a)});b=await r(b,f,e);c("QPLUserFlow").endSuccess(c("qpl")._(520829869,"994"),{instanceKey:e});f=b;b={ex:void 0,nop:f.dependencies.nop,ntop:f.dependencies.ntop,payload:f.output,request_id:e,sp:f.dependencies.sp,target:f.target};if(!(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(3)))return{type:"noresponseexpected"};f=d("LSDynamicDependencies").downloadBootloaderDependencies(b.sp,b.nop,b.ntop);return{downloadTask:f,payload:b,type:"taskresponse"}}catch(a){n({string:{error:JSON.stringify(a),errorMessage:a==null?void 0:a.message,errorString:a==null?void 0:a.toString==null?void 0:a.toString()}},e);c("QPLUserFlow").endFailure(c("qpl")._(520829869,"994"),"ohai_request_failed_with_error",{error:a,instanceKey:e});throw a}}g.default=a}),98);