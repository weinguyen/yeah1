;/*FB_PKG_DELIM*/

__d("MWChatTabLSDependencies",["LSCompleteThreadCutover","LSDynamicDependencies","LSMailboxTaskCompletionApiOnTaskCompletion","LSReceiveMarkThreadReadNative","LSSyncBumpThreadDataToClient","LSUpdateCommunityThreadStaleState","LSUpdateParentFolderReadWatermark","LSUpdateThreadNullState","LSVerifyE2EEMetadataThreadExistsV2","LSVerifyThreadRowExists","LSWriteCTAIdToThreadsTable"],(function(a,b,c,d,e,f,g){"use strict";d("LSDynamicDependencies").addToCachedModules({completeThreadCutover:c("LSCompleteThreadCutover"),mailboxTaskCompletionApiOnTaskCompletion:c("LSMailboxTaskCompletionApiOnTaskCompletion"),receiveMarkThreadReadNative:c("LSReceiveMarkThreadReadNative"),syncBumpThreadDataToClient:c("LSSyncBumpThreadDataToClient"),updateCommunityThreadStaleState:c("LSUpdateCommunityThreadStaleState"),updateParentFolderReadWatermark:c("LSUpdateParentFolderReadWatermark"),updateThreadNullState:c("LSUpdateThreadNullState"),verifyE2EEMetadataThreadExistsV2:c("LSVerifyE2EEMetadataThreadExistsV2"),verifyThreadRowExists:c("LSVerifyThreadRowExists"),writeCTAIdToThreadsTable:c("LSWriteCTAIdToThreadsTable")})}),34);
__d("MWInboxPrecutoverOpenThreadBannerInternal.react",["fbt","FDSButtonGroup.react","FDSContextualMessage.react","FDSIcon.react","I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","MWEncryptedBackupsLocalStorageEntryEnum","MWPActor.react","MWXIconExclamationMarkCircle","MWXQPCard.react","ReQL","ReQLSuspense","getMWInlineQPBannerStyles","getMWLocalStorageThreadsWithBannerDismissed","gkx","react","react-compiler-runtime","requireDeferred","setHasDismissedSecretConversationsDeprecationBanner.react","stylex","useMWEntrypoint","useMWRedirectToEncryptedThreadOfDualThread","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react")),n=l.useState,o=c("requireDeferred")("MessageThreadEventsFalcoEvent").__setRef("MWInboxPrecutoverOpenThreadBannerInternal.react"),p={fdsRoot:{boxShadow:"xnw9j1v",$$css:!0},fdsRootMargin:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(58);a=a.thread;var e=a.threadKey,g=a.threadType,l=(i||(i=c("useReStore")))(),r=d("MWPActor.react").useActor(),s;b[0]!==r||b[1]!==e?(s=(k||(k=d("I64"))).equal(r,e),b[0]=r,b[1]=e,b[2]=s):s=b[2];var t=s,u;b[3]!==r||b[4]!==l||b[5]!==t||b[6]!==e||b[7]!==g?(s=function(){return d("LSMessagingThreadTypeUtil").isOneToOne(g)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(l.tables.participants).getKeyRange(e),d("ReQL").fromTableAscending(l.tables.contacts)).filter(function(a){a=a[1];return t||!(k||(k=d("I64"))).equal(a.id,r)}).map(q):d("ReQL").empty()},u=[l,e,g,r,t],b[3]=r,b[4]=l,b[5]=t,b[6]=e,b[7]=g,b[8]=s,b[9]=u):(s=b[8],u=b[9]);s=d("ReQLSuspense").useFirst(s,u,f.id+":83");var v=d("MAWThreadCutover").useIsCutoverOpenThread(e);u=d("MAWThreadCutover").useIsDualThreadCutoverOpenThread(e);var w;b[10]!==a?(w=d("LSThreadBitOffset").has(260,a),b[10]=a,b[11]=w):w=b[11];a=w;var x=c("useMWRedirectToEncryptedThreadOfDualThread")(e);b[12]!==e?(w=function(){var a=d("getMWLocalStorageThreadsWithBannerDismissed").parseLocalStorageThreadsWithBannerDismissed(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_PRECUTOVER_BANNER_ON_OPEN_THREAD_DISMISSED);return!Object.prototype.hasOwnProperty.call(a,(k||(k=d("I64"))).to_string(e))},b[12]=e,b[13]=w):w=b[13];w=n(w);var y=w[0],z=w[1],A=c("useMWEntrypoint")();b[14]!==g?(w=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g),b[14]=g,b[15]=w):w=b[15];var B=w;b[16]!==A||b[17]!==v||b[18]!==B||b[19]!==e||b[20]!==g?(w={onVisible:function(){o.onReady(function(a){return a.log(function(){return{entry_point:A,event_type:"secret_conversation_open_thread_banner_impression_event",is_cutover:v,thread_id:(k||(k=d("I64"))).to_string(e),thread_type:k.to_string(g),transport_type:B?"ACT":"MI"}})})}},b[16]=A,b[17]=v,b[18]=B,b[19]=e,b[20]=g,b[21]=w):w=b[21];w=c("useVisibilityObserver")(w);var C=c("gkx")("23219"),D;b[22]===Symbol["for"]("react.memo_cache_sentinel")?(D=h._(/*BTDS*/"[FB-only] We\u2019re archiving this chat soon"),b[22]=D):D=b[22];D=D;if(b[23]!==t||b[24]!==(s==null?void 0:s.firstName)||b[25]!==(s==null?void 0:s.name)){var E;E=t?h._(/*BTDS*/"Your secret conversation will become the end-to-end encrypted chat you use instead. See what other chats are affected and what you can do."):h._(/*BTDS*/"Your secret conversation with {name} will become the end-to-end encrypted chat you use instead. See what other chats are affected and what you can do.",[h._param("name",(E=s==null?void 0:s.firstName)!=null?E:s==null?void 0:s.name)]);b[23]=t;b[24]=s==null?void 0:s.firstName;b[25]=s==null?void 0:s.name;b[26]=E}else E=b[26];s=E;b[27]===Symbol["for"]("react.memo_cache_sentinel")?(E=h._(/*BTDS*/"Learn more on Workplace"),b[27]=E):E=b[27];E=E;var F;b[28]===Symbol["for"]("react.memo_cache_sentinel")?(F=h._(/*BTDS*/"Switch to other chat"),b[28]=F):F=b[28];F=F;var G;b[29]!==A||b[30]!==v||b[31]!==B||b[32]!==e||b[33]!==g?(G=function(){o.onReady(function(a){return a.log(function(){return{entry_point:A,event_type:"secret_conversation_deprecation_open_thread_banner_url_cta",is_cutover:v,thread_id:(k||(k=d("I64"))).to_string(e),thread_type:k.to_string(g),transport_type:B?"ACT":"MI"}})})},b[29]=A,b[30]=v,b[31]=B,b[32]=e,b[33]=g,b[34]=G):G=b[34];G=G;var H;b[35]!==A||b[36]!==v||b[37]!==B||b[38]!==x||b[39]!==e||b[40]!==g?(H=function(){o.onReady(function(a){return a.log(function(){return{entry_point:A,event_type:"secret_conversation_open_thread_banner_cta_click_event",is_cutover:v,thread_id:(k||(k=d("I64"))).to_string(e),thread_type:k.to_string(g),transport_type:B?"ACT":"MI"}})}),x()},b[35]=A,b[36]=v,b[37]=B,b[38]=x,b[39]=e,b[40]=g,b[41]=H):H=b[41];H=H;var I;b[42]!==A||b[43]!==v||b[44]!==B||b[45]!==e||b[46]!==g?(I=function(){d("setHasDismissedSecretConversationsDeprecationBanner.react").setHasDismissedSecretConversationsDeprecationBanner((k||(k=d("I64"))).to_string(e),c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_PRECUTOVER_BANNER_ON_OPEN_THREAD_DISMISSED),o.onReady(function(a){return a.log(function(){return{entry_point:A,event_type:"secret_conversation_open_thread_banner_dismissed_event",is_cutover:v,thread_id:(k||(k=d("I64"))).to_string(e),thread_type:k.to_string(g),transport_type:B?"ACT":"MI"}})}),z(!1)},b[42]=A,b[43]=v,b[44]=B,b[45]=e,b[46]=g,b[47]=I):I=b[47];I=I;b[48]!==s||b[49]!==v||b[50]!==u||b[51]!==a||b[52]!==I||b[53]!==G||b[54]!==H||b[55]!==w||b[56]!==y?(C=y&&a&&!v&&!u&&m.jsx(m.Fragment,{children:C?m.jsx("div",babelHelpers["extends"]({"data-testid":void 0},(j||(j=c("stylex"))).props(d("getMWInlineQPBannerStyles").inlineQPBannerStyles.inlineQPBannerWrapper),{children:m.jsx(c("MWXQPCard.react"),{addOnPrimary:{label:E,linkProps:{target:"_blank",url:"https://fb.workplace.com/groups/2457488504616167/permalink/2458956987802652/"},onPress:G},addOnSecondary:{label:F,onPress:H},body:s,headline:D,icon:{props:{color:"secondary",icon:c("MWXIconExclamationMarkCircle"),size:24},type:"icon"},onClose:I,ref:w,xstyle:d("getMWInlineQPBannerStyles").inlineQPBannerStyles.inlineQPBanner})})):m.jsx("div",babelHelpers["extends"]({},(j||(j=c("stylex"))).props(p.fdsRoot,p.fdsRootMargin,d("getMWInlineQPBannerStyles").inlineQPBannerStyles.inlineQPBannerWrapper),{ref:w,children:m.jsx(c("FDSContextualMessage.react"),{addOnPrimary:m.jsx(c("FDSButtonGroup.react"),{align:"justify",expanding:!0,paddingHorizontal:12,paddingTop:12,primary:{label:E,linkProps:{target:"_blank",url:"https://fb.workplace.com/groups/2457488504616167/permalink/2458956987802652/"},onPress:G,type:"primary"}}),addOnSecondary:m.jsx(c("FDSButtonGroup.react"),{align:"justify",expanding:!0,paddingHorizontal:12,paddingTop:4,primary:{label:F,onPress:H,type:"secondary"}}),body:s,headline:D,icon:m.jsx(c("FDSIcon.react"),{color:"secondary",icon:c("MWXIconExclamationMarkCircle").originalComponent,size:24}),level:4,onClose:I,type:"primary"})}))}),b[48]=s,b[49]=v,b[50]=u,b[51]=a,b[52]=I,b[53]=G,b[54]=H,b[55]=w,b[56]=y,b[57]=C):C=b[57];return C}function q(a){a=a[1];return a}g["default"]=a}),226);